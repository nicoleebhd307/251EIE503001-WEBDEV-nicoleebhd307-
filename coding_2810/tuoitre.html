<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset='utf-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D·ª± B√°o Th·ªùi Ti·∫øt Vi·ªát Nam</title>
  <!-- GET API 
  - T∆∞∆°ng t√°c v·ªõi web t·∫°i v·ªã tr√≠ c·∫ßn get -> check Network -> xem thay ƒë·ªïi m·ªõi nh·∫•t (d∆∞·ªõi c√πng) -> click v√†o t√™n file (th∆∞·ªùng l√† type .xhr) -> ch·∫°y file l√† ra data m√† API ƒë√£ get  
  -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
    
    h3 {
      color: white;
      text-align: center;
      font-size: 2.8em;
      margin-bottom: 40px;
      font-weight: 700;
      letter-spacing: -1px;
      text-shadow: 0 4px 20px rgba(0,0,0,0.3);
      animation: fadeInDown 0.8s ease;
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .select-wrapper {
      text-align: center;
      margin-bottom: 40px;
      animation: fadeIn 1s ease 0.3s both;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    #provinces {
      padding: 16px 32px;
      font-size: 17px;
      border: none;
      border-radius: 50px;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      color: #333;
      cursor: pointer;
      min-width: 280px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.15);
      outline: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-weight: 600;
    }
    
    #provinces:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0,0,0,0.2);
      background: white;
    }
    
    #provinces:focus {
      box-shadow: 0 0 0 4px rgba(255,255,255,0.3);
    }
    
    .weather-info {
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(20px);
      border-radius: 32px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: slideUp 0.6s ease 0.4s both;
      border: 1px solid rgba(255,255,255,0.3);
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .current-weather {
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
      border-radius: 24px;
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }
    
    .current-weather::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    .current-weather > * {
      position: relative;
      z-index: 1;
    }
    
    .current-weather h2 {
      color: #333;
      margin-bottom: 20px;
      font-size: 2em;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .current-weather .temp {
      font-size: 5em;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
      margin: 30px 0;
      line-height: 1;
      text-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
    }
    
    .current-weather .description {
      font-size: 1.5em;
      color: #555;
      margin-bottom: 20px;
      font-weight: 500;
      text-transform: capitalize;
    }
    
    .current-weather .feels-like {
      font-size: 1.1em;
      color: #888;
      font-weight: 400;
    }
    
    .weather-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .detail-item {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 24px;
      border-radius: 20px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      border: 2px solid transparent;
    }
    
    .detail-item:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
      border-color: #667eea;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    }
    
    .detail-item .label {
      color: #666;
      font-size: 0.95em;
      margin-bottom: 10px;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    
    .detail-item .value {
      color: #333;
      font-size: 1.5em;
      font-weight: 700;
    }
    
    .hourly-forecast {
      margin-top: 40px;
    }
    
    .hourly-forecast h3 {
      color: #333;
      text-align: left;
      font-size: 1.8em;
      margin-bottom: 25px;
      text-shadow: none;
      font-weight: 700;
      padding-left: 10px;
      border-left: 5px solid #667eea;
    }
    
    .hourly-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 20px;
      max-height: 500px;
      overflow-y: auto;
      padding: 10px;
      scrollbar-width: thin;
      scrollbar-color: #667eea #f0f0f0;
    }
    
    .hourly-list::-webkit-scrollbar {
      width: 8px;
    }
    
    .hourly-list::-webkit-scrollbar-track {
      background: #f0f0f0;
      border-radius: 10px;
    }
    
    .hourly-list::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 10px;
    }
    
    .hour-item {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .hour-item::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .hour-item:hover::before {
      opacity: 1;
    }
    
    .hour-item:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 16px 40px rgba(102, 126, 234, 0.5);
    }
    
    .hour-item > * {
      position: relative;
      z-index: 1;
    }
    
    .hour-item .time {
      font-weight: 700;
      margin-bottom: 12px;
      font-size: 1.1em;
      letter-spacing: 0.5px;
    }
    
    .hour-item .temp {
      font-size: 2em;
      font-weight: 800;
      margin: 15px 0;
      text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    
    .hour-item .desc {
      font-size: 0.9em;
      margin-top: 8px;
      opacity: 0.95;
      font-weight: 500;
    }
    
    .loading {
      text-align: center;
      color: white;
      font-size: 1.4em;
      padding: 60px;
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    
    .error {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
      color: white;
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      margin: 20px 0;
      box-shadow: 0 10px 30px rgba(255,107,107,0.4);
      animation: shake 0.5s ease;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .info-box {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 20px;
      margin-top: 30px;
      text-align: center;
      font-weight: 500;
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
    }
    
    @media (max-width: 768px) {
      h3 {
        font-size: 2em;
      }
      
      .current-weather .temp {
        font-size: 3.5em;
      }
      
      .weather-details {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .hourly-list {
        grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>üå§Ô∏è D·ª± B√°o Th·ªùi Ti·∫øt Vi·ªát Nam</h3>
    
    <div class="select-wrapper">
      <select id="provinces" onchange="show_detail_weather_forecast(this.value)">
        <option value="">Ch·ªçn t·ªânh th√†nh...</option>
      </select>
    </div>

    <div id="weatherDisplay"></div>
  </div>

  <script>
    const id = ['2347719','20070078','20070086','2347731','2347730','20070081','20070087','20070084','20070088','2347703','2347704','20070082','2347732','28301718','20070085','1252375','2347720','28301719','2347721','2347722','2347733','2347727','2347728','2347734','2347741','2347736','2347737','20070079','20070080','2347707','28301720','2347738','2347723','20070076','2347708','2347710','2347740','2347709','2347718','20070089','2347742','2347743','2347744','20070091','2347745','2347746','2347711','20070077','2347712','2347747','2347748','2347713','2347715','2347716','20070083','2347749','2347717','2347750','2347751','2347714','2347752','20070090','2347729','2347753'];
    const names = ['An Giang','B√¨nh D∆∞∆°ng','B√¨nh Ph∆∞·ªõc','B√¨nh Thu·∫≠n','B√¨nh ƒê·ªãnh','B·∫°c Li√™u','B·∫Øc Giang','B·∫Øc K·∫°n','B·∫Øc Ninh','B·∫øn Tre','Cao B·∫±ng','C√† Mau','C·∫ßn Th∆°','ƒêi·ªán Bi√™n','ƒê√† N·∫µng','ƒê√† L·∫°t','ƒê·∫Øk L·∫Øk','ƒê·∫Øk N√¥ng','ƒê·ªìng Nai','ƒê·ªìng Th√°p','Gia Lai','H√† N·ªôi','TP. H·ªì Ch√≠ Minh','H√† Giang','H√† Nam','H√† Tƒ©nh','H√≤a B√¨nh','H∆∞ng Y√™n','H·∫£i D∆∞∆°ng','H·∫£i Ph√≤ng','H·∫≠u Giang','Kh√°nh H√≤a','Ki√™n Giang','Kon Tum','Lai Ch√¢u','Long An','L√†o Cai','L√¢m ƒê·ªìng','L·∫°ng S∆°n','Nam ƒê·ªãnh','Ngh·ªá An','Ninh B√¨nh','Ninh Thu·∫≠n','Ph√∫ Th·ªç','Ph√∫ Y√™n','Qu·∫£ng B√¨nh','Qu·∫£ng Nam','Qu·∫£ng Ng√£i','Qu·∫£ng Ninh','Qu·∫£ng Tr·ªã','S√≥c TrƒÉng','S∆°n La','Thanh H√≥a','Th√°i B√¨nh','Th√°i Nguy√™n','Th·ª´a Thi√™n Hu·∫ø','Ti·ªÅn Giang','Tr√† Vinh','Tuy√™n Quang','T√¢y Ninh','Vƒ©nh Long','Vƒ©nh Ph√∫c','V≈©ng T√†u','Y√™n B√°i'];

    function load_provinces() {
      const provincesSelect = document.getElementById('provinces');
      for (let i = 0; i < id.length; i++) {
        const opt = document.createElement('option');
        opt.value = id[i];
        opt.textContent = names[i];
        provincesSelect.appendChild(opt);
      }
    }

    async function show_detail_weather_forecast(cityId) {
      if (!cityId) return;
      
      const weatherDisplay = document.getElementById('weatherDisplay');
      weatherDisplay.innerHTML = '<div class="loading">‚è≥ ƒêang t·∫£i d·ªØ li·ªáu th·ªùi ti·∫øt...</div>';

      try {
        const apiUrl = `https://utils3.cnnd.vn/ajax/weatherinfo/${cityId}.htm`;

        const proxies = [
          `https://api.allorigins.win/get?url=${encodeURIComponent(apiUrl)}`,
          `https://corsproxy.io/?${encodeURIComponent(apiUrl)}`,
          `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(apiUrl)}`,
          `https://thingproxy.freeboard.io/fetch/${apiUrl}`
        ];

        let data = null;

        for (const proxyUrl of proxies) {
          try {
            console.log('üîÑ Th·ª≠ proxy:', proxyUrl);
            const response = await fetch(proxyUrl);
            if (!response.ok) throw new Error(`HTTP ${response.status}`);

            const text = await response.text();

            if (proxyUrl.includes('allorigins')) {
              const json = JSON.parse(text);
              data = JSON.parse(json.contents);
            } else {
              data = JSON.parse(text);
            }

            console.log('‚úÖ Th√†nh c√¥ng v·ªõi proxy:', proxyUrl);
            break;
          } catch (err) {
            console.warn('‚ùå Proxy l·ªói:', proxyUrl, err.message);
            continue;
          }
        }

        if (!data) throw new Error('Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn m√°y ch·ªß th·ªùi ti·∫øt. Vui l√≤ng th·ª≠ l·∫°i!');

        console.log('üì¶ D·ªØ li·ªáu nh·∫≠n ƒë∆∞·ª£c:', data);
        displayWeather(data, cityId);

      } catch (error) {
        console.error('üö® L·ªói:', error);
        weatherDisplay.innerHTML = `
          <div class="error">
            ‚ùå ${error.message}<br>
            <small style="opacity:0.9;margin-top:10px;display:block;">
              üí° G·ª£i √Ω: Ki·ªÉm tra k·∫øt n·ªëi internet ho·∫∑c th·ª≠ l·∫°i sau v√†i gi√¢y
            </small>
          </div>
        `;
      }
    }

    function displayWeather(data, cityId) {
      const weatherDisplay = document.getElementById('weatherDisplay');

      if (!data || !data.Data || !data.Data.data || !data.Data.data.datainfo) {
        weatherDisplay.innerHTML = '<div class="error">‚ùå D·ªØ li·ªáu th·ªùi ti·∫øt kh√¥ng h·ª£p l·ªá</div>';
        return;
      }

      const info = data.Data.data.datainfo;
      const locationName = names[id.indexOf(cityId)] || 'Kh√¥ng x√°c ƒë·ªãnh';

      let html = '<div class="weather-info">';
      
      html += `
        <div class="current-weather">
          <h2>üìç ${locationName}</h2>
          <div class="temp">${info.temperature || 'N/A'}¬∞</div>
          <div class="description">${info.status || 'ƒêang c·∫≠p nh·∫≠t'}</div>
          <div class="feels-like">C·∫£m gi√°c nh∆∞ ${info.feels_like || 'N/A'}¬∞C</div>
        </div>
      `;

      html += `
        <div class="weather-details">
          <div class="detail-item">
            <div class="label">üíß ƒê·ªô ·∫©m</div>
            <div class="value">${info.humidity || 'N/A'}</div>
          </div>
          <div class="detail-item">
            <div class="label">üí® Gi√≥</div>
            <div class="value">${info.wind?.index || 'N/A'}</div>
          </div>
          <div class="detail-item">
            <div class="label">‚òÄÔ∏è Ch·ªâ s·ªë UV</div>
            <div class="value">${info.UV_index?.index || 'N/A'}</div>
          </div>
          <div class="detail-item">
            <div class="label">üåÖ B√¨nh minh</div>
            <div class="value">${info.sunrise || 'N/A'}</div>
          </div>
          <div class="detail-item">
            <div class="label">üåá Ho√†ng h√¥n</div>
            <div class="value">${info.sunset || 'N/A'}</div>
          </div>
          <div class="detail-item">
            <div class="label">üëÅÔ∏è T·∫ßm nh√¨n</div>
            <div class="value">${info.visibility?.index || 'N/A'}</div>
          </div>
        </div>
      `;

      if (info.hourly_temperature && Array.isArray(info.hourly_temperature) && info.hourly_temperature.length > 0) {
        html += '<div class="hourly-forecast">';
        html += '<h3>‚è∞ D·ª± b√°o theo gi·ªù</h3>';
        html += '<div class="hourly-list">';
        
        info.hourly_temperature.forEach(h => {
          html += `
            <div class="hour-item">
              <div class="time">${h.time || 'N/A'}:00</div>
              <div class="temp">${h.temperature || '?'}¬∞</div>
              <div class="desc">${h.status || ''}</div>
            </div>
          `;
        });
        
        html += '</div></div>';
      }

      html += '<div class="info-box">üí° D·ªØ li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t t·ª´ h·ªá th·ªëng d·ª± b√°o th·ªùi ti·∫øt Vi·ªát Nam</div>';
      html += '</div>';
      
      weatherDisplay.innerHTML = html;
    }

    // Kh·ªüi t·∫°o
    load_provinces();
    
    // T·ª± ƒë·ªông load TP. HCM
    const hcmIndex = names.indexOf('TP. H·ªì Ch√≠ Minh');
    if (hcmIndex !== -1) {
      document.getElementById('provinces').value = id[hcmIndex];
      show_detail_weather_forecast(id[hcmIndex]);
    }
  </script>
</body>
</html>